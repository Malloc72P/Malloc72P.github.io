---
sort: 3
title: 표준 입출력, 그리고 에러
tags: [ 쉘프로그래밍 ]
---

## 입출력 방향 변경( 리다이렉션 )

### 꼭 알고 있어야 하는 사실 

### 유닉스는 대부분의 장치를 파일로 취급한다. + 표준입출력

유닉스는 대부분의 장치를 파일로 관리한다. 표준입력(키보드), 표준출력(모니터), 표준에러(모니터)또한 파일로 관리되며, 이들은 각각 0, 1, 2이다. 표준입력(키보드)으로부터 사용자 입력을 받겠다는건 파일 디스크립터가 0인 파일로 부터 Read하겠다는 말이다. 출력결과를 모니터라는 표준출력에 하겠다면, 파일 디스크립터가 1인 파일에 write하겠다는 걸 말한다. 

#### 예제 1 : cat명령어로 알아보는 입출력

cat만 치면, 아무것도 안뜬다. 이때 키보드로 입력할 수 있다,  i love cat이라고 쳐보자.

```shell
$ cat
i love cat
i love cat
```

내가 친 결과가 고대로 나온다. 그 이유는 뭘까?

cat만 치면, 표준 입력에서 읽어서 표준 출력에 쓴다. 표준입력이 키보드고, 출력이 모니터니까, 내가 키보드로 입력한 내용이 모니터로 나온것이다.
### 입출력 방향 변경 : 리다이렉션

#### 출력의 방향을 표준출력에서 내가 지정한 파일로 바꿀 수 있다.

```shell
## >>를 써서 출력의 방향을 바꿀 수 있다.
$ cat >> cat.txt
i hate cat!

# view 명령어로 cat.txt파일의 내용을 보자.
$ cat cat.txt
i hate cat!
```

표준출력대신 cat.txt파일에 쓸 수 있었다.

#### 표준출력과 에러는 다른 장치이다.

물론 출력결과랑 에러내용을  모니터로 보고 싶어하니까 표준출력과 에러는 모니터로 지정되어 있고, 둘 다 모니터에 출력하니까 같은결과처럼 보일 수 있다. 하지만 둘은 다른 장치이다.

만약 둘다 모니터에 찍히니까 표준출력이랑 에러는 같은 장치라고 생각해보자. 그럼 모니터로 나온 결과를 리다이렉션하면 파일에 저장되어야 맞다. 그러면 에러가 찍혀도 리다이렉션하면 파일에 기록될 것이다.

```shell
# 표준출력으로 ls결과 출력
ls > test.out
# 없는 폴더에 접근하게 시켜보자. 당연히 에러메세지가 모니터에 출력된다.
ls /nowhere >> test.err
ls: cannot access '/nowhere': No such file or directory
# 표준출력과 에러 둘 다 모니터에 찍혔으니까 둘 다 같은애야! 라고 생각이 된다면,
# 에러결과도 모니터에 찍혔으니까 test.err에 있어야 맞다.
$ cat test.out
asdf/
ls.err
$ cat ls.err

# 아무것도 없다. ㅇㅇ. 표준출력과 에러는 다른 애였다.
```

* 만약 어떤 프로그램을 돌려놓고, 에러가 발생하면 이 파일에 기록하라고 리다이렉션을 걸어놨다고 치자.
* 위처럼 해놨다면 망한다. 일단 에러는 모니터에 찍힐거고, 파일엔 아무것도 기록되지 않는다

##### 예제1 : 파일에 표준에러의 결과를 기록해보자

```shell
# 리다이렉션 기호를 하나만 쓰면, 리다이렉션 대상의 파일 디스크립터를 지정할 수 있다.
# 표준에러인 2번을 test.err파일로 리다이렉션해보자.
$ ls /nowhere 2> test.err
$ cat test.err
ls: cannot access '/nowhere': No such file or directory
```

##### 예제2 : 표준입력을 지정한 파일로 바꿔보자

```shell
$ cat < cat.txt
i hate cat!
```

##### 예제3 : 표준 출력과 에러의 결과를 하나의 파일에 저장해보자

```shell
# 현재 경로랑 /nowhere에 대해 ls한 결과를 res에 출력한다
# 표준출력은 res에, 표준에러(2)는 1번파일(&1)에 저장한다.
$ ls . /nowhere > res 2>&1
$ cat res
ls: cannot access '/nowhere': No such file or directory
.:
asdf/
cat.txt
ls.err
ls.out

```



