---
sort: 10
title: 알고리즘 기초 1/2 비트 마스크
tags: [ 알고리즘, 백준 ]
---

## Codeplus : 브루트포스 - 순열

### 논리연산

|  A   |  B   |  ~A  | A & B | A \| B | A ^ B |
| :--: | :--: | :--: | :---: | :----: | :---: |
|  0   |  0   |  1   |   0   |   0    |   0   |
|  0   |  1   |  1   |   0   |   1    |   1   |
|  1   |  0   |  0   |   0   |   1    |   1   |
|  1   |  1   |  0   |   1   |   1    |   0   |

* XOR은 베타적 논리합으로, 기호는 `A ^ B`를 쓴다.
  * 두 비트가 다를 때만 참이 된다

### 시프트 연산

* `<<`, `>>`연산이 있다. 각 방향으로 비트를 밀어버린다.
* 이진수 `1`을 `<<`하면 좌로 한칸 밀어버리니까 이진수 `10`이 된다.
* 또 한번 밀면 `100`이 된다.
* 3은 이진수로는 `11`이고, 이를 `<<3`하면 `11000`이 된다. 결과는 24가 된다.
* 30 >> 1
  *  `11110`을 `>>`한다. `1111`이 되므로 15가 된다
* `A << B` 는 `A X 2^B`와 같다
* `A >> B`는 `A / 2^B`와 같다

### 비트마스크

* 비트가 10개 있다고 치자. 그러면 0부터 9까지해서 있는지 없는지 여부를 저장할 수 있다.
* 예를 들면, 집합 S = `{1, 3, 4, 5, 9}`가 있다고 치자.
* 이걸 비트로 표현해보자. 원소가 있으면 1, 없으면 0으로 표현하자
* 그러면 `10 0011 1010`으로 표현할 수 있다. 10진수로 표기하면 570이 된다.
* 그러므로, 우리는 정수를 가지고 집합을 표현할 수 있다.

* 그런 이유로 비트마스크를 쓰면 공간사용이 적다.
* 또한 집합에 값을 추가, 삭제, 검사하는 비용이 `O(1)`이다
* 다만 표현 가능한 집합의 범위에는  한계가 있다.

##### 집합에 값이 있는지 검사하기

* 검사하려는 요소에 해당하는 비트만 1로 만들고, 나머지는 0인 마스크를 준비한다
* 집합 S와 검사용 마스크를 AND연산한다
* 결과가 0이면 없음을 의미한다.
* 0이 아니면 요소가 있음을 의미한다.

##### 추가하기

* 요소X 를 추가한다면, 집합S의 X번째 비트를 1로 세팅한다 
* 해당 요소만 1로 세팅한 마스크와 집합 S를 OR연산을 한다

##### 삭제하기

* 요소X를 삭제한다면, `~2^X`인 마스크를 만들자
  * 그러면 요소만 0이 되고, 나머지는 1이 된다
* 집합 S와 마스크를 AND연산하면, X외의 요소는 원래 값이 나오지만, 요소 X는 0이 된다

##### 토글 연산

* 같으면 0, 다르면 1인 XOR연산을 이용한다.
* 요소X만 1인 마스크와 XOR연산을 하면, 요소 X에서 `1 ^ 1`이 되버려서 0이 된다. 반대로 `0 ^ 1`이면 1이 되니까 토글 연산이 가능해진다.

##### 전체집합

* `(1 << (N + 1)) - 1`을 하면 된다.
* `1 << (N + 1)`을 하면, N+1번째 자리에 1이 올라간다. 나머지는 0이다.
* 여기서 1을 빼게 되면, 1부터 N까지 전부 1이 된다

##### 공집합

* 0

### 부분수열의 합

* 부분수열의 개수를 구해야 시간복잡도를 생각해볼 수 있다.
* 길이가 N인 수열 A의 부분수열은 총 몇개가 있을까?
* A의 각각의 요소에서 두가지 선택지가 주어진다고 생각해보자. 얘를 부분수열에 쓸지 안쓸지를 결정한다고 생각할 수 있다.
* 이런 요소가 N개있다. 길이가 N이기 때문이다.
* 따라서, `2^N`개의 부분수열이 존재한다는걸 알 수 있다.
* 근데 여기서, 공집합도 포함되어 있음에 주의해야 한다.
* 크기가 양수인 부분수열의 개수만 다 구한다면 `2^N - 1`이 된다
* 부분수열의 합을 구하는데는 최악의 경우 N이 걸린다.
* 따라서 부분수열의 합을 브루트포스로 풀면 `O(2^N * N)`이 된다
* 해봤자 `20,971,520`이므로, 다 해봐도 된다
* 