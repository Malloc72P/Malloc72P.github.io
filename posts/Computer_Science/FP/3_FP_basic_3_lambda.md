---
sort: 3
title: FP와 람다표현식
tags: [ FP ]
---

## 함수형 프로그래밍의 정의

#### 람다함수는 함수를 단순하게 표현하게  해주는 표현식이다.

람다 대수는 함수를 단순하게 표현할 수 있게 해주며, 이름이 필요없다(익명함수). 변수의 이름도 필요없어서 다른 람다표현이면 같은 이름의 변수일지라도 다른 변수이다. 두개의 입력을 받는 함수를 하나의 입력을 받아 또 다른 함수를 출력하는 함수로 고칠 수 있다. 어떤 함수의 출력을 다른 함수의 입력으로 쓸 수 있다는걸 말하는 것 같다. 그리고 람다표현에 묶여있지 않은 변수를 자유변수라고 부른다.

#### 함수형 프로그래밍이란?

공유상태나 변경가능한 데이터를 피하고, 수학적 함수인 순수한 함수를 조합해서 프로그램을 만드는 방식을 함수형 프로그래밍이라고 한다.  함수형 프로그래밍의 함수는 1급객체이고 변수에 넣을 수 있고, 패러미터로 전달하거나 리턴값으로 사용할 수 있다.

#### 순수함수란? [추가참조](https://jinwooe.wordpress.com/2017/12/21/%EB%B6%80%EC%88%98-%ED%9A%A8%EA%B3%BC-side-effect-%EC%B0%B8%EC%A1%B0-%ED%88%AC%EB%AA%85%EC%84%B1-referential-transparency/)

함수형 프로그램에서 말하는 함수는 순수한 함수를 말한다. 순수한 함수는 같은 입력에 대해 항상 같은 출력을 리턴한다. SideEffect가 없는 결과를 생성하기때문에, 순수함수에서 프로그램의 상태를 변경하지 않는다.

순수함수는 SideEffect가 없어야 한다. 이를 부수효과라고 번역하는데, 부수효과란, 함수의 실행으로 함수 외부에 영향을 주는 경우를 말한다. 예외를 발생시키는것도 SideEffect라고 한다. 

참조 투명성이란, 함수가 함수 외부의 영향을 받지 않는것을 말한다. 함수는 패러미터에만 의존해야 한다. 외부의 값에 의존하는 경우, 외부의 값이 변경되면 이것의 영향을 받기 때문에, 같은 입력에 대해 같은 출력을 리턴하지 않을 수 있다.

#### 고차함수란?

아규먼트로 함수를 넘길 수 있고 리턴값으로 함수를 리턴하는 함수를 고차함수라고 한다.

#### 클로저란?

클로저란 내부함수가 외부함수의 문맥에 접근할 수 있는 것을 말한다. 예를 들면 람다표현식에서 외부함수의 변수에 접근하는 경우, 스코프를 확장해서 표현식이 외부함수의 변수에 접근할 수 있게 한다. 이때 외부함수의 변수를 자유변수(FreeVariable)라고 한다. 자바의 경우 자유변수는 final이거나 Effectively Final이기 때문에, 값을 수정할 수 없고, 읽을 수 만 있다.

#### 람다가 없으면 함수형 프로그래밍을 못하는걸까?

그건 아니다. 익명클래스로도 함수형 프로그래밍을 할 수는 있다.

루카스를 보면 람다가 없던시절이랑 람다가 있던 시절을 비교해서 설명했다. 처음엔 이게 나오는 의미를 잘 몰랐다. 일단 지금 드는 생각으로는, 우리가 해야하는건 함수형 프로그래밍을 하고 싶은거고, 그러기 위해선 함수를 패러미터로 보내거나 타입으로 지정하거나 리턴할 수 있어야 한다. 그러면 이걸 어떻게 구현할 수 있을까?

익명클래스를 쓰면 된다. 익명클래스로 만들고, 이걸 패러미로 받은 쪽에서 익명클래스.runFunc()한다고 치면, runFunc()메서드를 정의해서 넘기면 된다.

근데 우린 함수만 넘기고 싶었던 건데 굳이 익명클래스까지 넘겨야 하는걸까? 라고 생각한다면, java8부터는 람다표현식을 쓸 수 있기 때문에, 굳이 익명클래스를 쓸 이유가 없겠다.

일단 람다가 없어도 익명클래스를 쓰면 주고받고 다 할 수 있는데다가 익명클래스도 자유변수에 대한 접근은 final하게 해야 하기 때문에 못하는건 없다고 생각하지만, 엄청 코드가 지저분해질 것 같다.

### 함수형 프로그래밍 연습

- 불변성 (Immutable) 값이나 변수를 적극 활용해야 한다.

  람다표현식을 쓰는 경우, 표현식에서 참조하는 인클로징 클래스의 모든 변수는 final이나 Effectively Final로 쓰게 된다. 그래서 값이 바뀌지 않는다. 

  ```note
  이런 특성 덕분에 멀티스레드 환경에서 쓸 수 있다고 하는건가? 추가적인 공부가 필요하겠다.
  ```

- 함수가 참조 투명성을 지키고, 부작용을 줄일 수 있도록 구현해야 한다.

  앞서 정리한 것 처럼, 순수함수내에서 외부값이나 객체를 참조하지 않도록 해야 한다. 외부에 의존하면 참조투명성이 없게 되어 부작용(Side Effect)이 발생할 위험이 생긴다.

- 순수함수 (Pure Function) 로 구현해야 한다.

  같은 입력이 들어오면 항상 같은 출력이 나가도록 구현해야 한다.
