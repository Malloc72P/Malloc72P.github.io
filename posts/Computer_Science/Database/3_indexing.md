---
sort: 3
title: 인덱싱
tags: [ DB ]
---



## 데이터베이스와 인덱싱.

데이터베이스는 저장된 데이터를 빠르게 찾을 수 있어야 함과 동시에 데이터의 영속성을 보장해줘야 한다. 여기서 한가지 문제가 생기는게, 빠르게 접근하려면 주메모리에 데이터를 싹다 적재하면 좋겠지만 그러기엔 데이터가 너무 많아서 불가능할 수 있다. 반면 컴퓨터를 종료해도 데이터가 보존되어야 하니까 디스크에 저장할 수 밖에 없다. 근데 디스크IO는 정말정말 느린게 문제다. 그래도 여기에 저장하긴 해야한다. 어떻게 할까?

이때 쓸 수 있는 방법이 하나 있는데 그게 인덱싱이다. 탐색용파일(인덱스파일)을 만들자. 인덱스파일은 각각의 레코드의 PrimaryKey를 인덱스로 써서, 그 레코드가 있는 페이지 번호와 레코드번호를 얻을 수 있다. 이 정보는 그렇게 크지 않기 때문에 주메모리에 올려서 쓸 수 있다. 이걸 또 이진탐색으로 값을 찾을 수 있는 자료구조로 만들어두면, 아이디만 가지고 레코드가 어디있는지 빠르게 찾을 수 있다. 그러면 찾은 페이지번호와 레코드번호로 실제 데이터에 바로 접근할 수 있게 되어, 빠른 레코드 탐색이 가능하다.

그럼 만약 PK가 아닌 필드로 레코드를 찾는다면 어떻게 될까? Full Scan이 발생한다. 해당 테이블의 레코드를 전부 탐색하면서 레코드를 찾아야 한다. 그래서 성능이 끔찍해진다. 이럴땐 해당 필드도 인덱스를 만들어주면 된다.

실제 DB의 경우, 인덱스는 B-Tree를 써서 구현된다고 한다. 

##### 추가사항

성능을 더 높이고 싶다면, 캐싱을 하자. 자주 참조되는 데이터들 위주로 주메모리에 적재해놔서 디스크 접근을 최소화하자.

##### 추가사항 2

실제 데이터베이스는 PK를 기준으로 데이터를 정렬해서 넣는다고 한다. 이런 방식을 clustered index라고 한다. 좀 더 알기 위해 B-Tree clustered index를 공부해보면 좋다고 한다.