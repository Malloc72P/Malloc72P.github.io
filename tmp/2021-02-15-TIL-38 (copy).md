---
sort: -38
title: TIL-38, 서른여덟번째.
tags: [ TIL ]
---

# 오늘 할 일

- [ ] 코테문제풀기
- [ ] JVM에 대해 공부하기
- [ ] 토끼책 읽기
- [ ] SQL책 읽기

# 오늘 배운 내용  

### JVM

가상머신

컴퓨터에서 자바 프로그램을 실행 가능하게 해주는 Implementation?

스펙이 있고 임플멘테이션이 있다.

이 언어는 이렇게 동작해야해 가 스펙. 명세서이다

이 명세서를 돌아갈 수 있게 한게 임플멘테이션?

자바는 JVM이란게 자바의 임플멘테이션?



자바는 제임스 고슬링이 만듬

오라클이 인수해서 오라클에서 일하는 중



경량. 한번 짠 코드를 모든 플랫폼에서 실행할 수 있도록 만든것. 인터넷 시대가 되면서 성공함

왜? 가정용 기기에 넣는건 망했다. 근데 웹브라우저가 생기면서, 어떤 브라우저에서도 돌릴 수 있는 자바 애플릿은 각광받게 되었다?



클래스 로더

런타임 데이터 에이리어 ( 메모리 )

엑시큐션 엔진



javac로 컴파일하면 클래스파일이 생김. 여기엔 자바 바이트코드가 작성되어있다.

컴퓨터는 자바 바이트코드를 직접 실행할 수 없다. JVM의 인터프리터가 이걸 실행할 수 있다.

JVM은 JRE나 JDK를 설치하면 깔린다. JRE는 자바 실행 환경, JDK는 개발킷. JDK는 JRE와 개발도구를 포함한다.

Javac는 JRE에 포함되어 있지 않다. Javac는 JDK에 포함되어 있다.



클래스로더는 클래스파일을 메모리에 올린다.

절대 잊으면 안되는건, 프로그램을 실행하는 순간, 클래스로더가 클래스파일을 메모리에 로딩한다는 사실



Runtime Data Area는 메소드, 힙, 스택 Area등의 실행에 필요한 메모리 영역을 말한다.



엑시큐션 엔진은 인터프리터, GC등이 있다.



* java파일을 javac로 컴파일하면 클래스파일이 된다. 여기엔 자바 바이트코드가 작성되어 있다.
* 클래스로더로 클래스파일을 Runtime Data Area에 올린다.
* 그러면 엑시큐션엔진이 RDA에 있는걸 실행한다.
* 엑시큐션 엔진은 인터프리터와 Jit컴파일러와 GC로 구성되어 있다.



클래스파일? 

javap는 역 어셈블러. 클래스파일을 소스코드로 보여준다?

javap -c asdf.class 하면 클래스파일의 바이트코드를 보여준다.

xxd asdf.class를 하면, 헥사덤프를 볼 수 있다



클래스 안에 클래스를 만들수 있다. 이너클래스라고 한다

근데 asdf.java파일 안에 public 클래스를 두개 선언하는건 안된다. 이너클래스로 하면 되는데, 둘 다 밖에 있으면, 안된다. 퍼블릭 클래스는 해당 자바 파일과 이름이 같아야 한다. 다른 퍼블릭클래스가 있을 수 없다.



디폴트는 패키지 프라이빗이라고 부른다? 패키지에서만 프라이빗하다고 한다.



클래스 로더 서브시스템은 동적으로 클래스를 로딩한다.

클래스가 처음 쓰일때, 클래스 로더가 런타임 데이터 에이리어에 올린다.

FQCN이라는건 classpath까지 합친 정보?



Linking은 클래스 파일을 검사한다? 

정적변수는 클래스로더에 있는 링킹과정에 의해 초기화된다. 기본값으로 저장된다.

그 다음 Initialization에서 정적변수를 초기값으로 지정된다. static int asdf = 24였다면, 이 단계에서 24로 저장되는 것.



static{}? 클래스 로더에서 스태틱을 먼저 실행하기 때문? 스태틱이 제일 먼저 실행되고, 힙에서 인스턴스가 생성될 때 그때 생성자가 호출?

클래스로더가 클래스파일을 로딩해야 하므로, 클래스에 메인 메서드가 정의되어있고, 이걸로 실행한다면, 해당 클래스를 인스턴스로 생성하지 않아도, static은 호출된다.

클래스를 필요한 시점에서 로딩하기 때문에, 메인메서드를 호출하므로, 얘가 정의된 클래스는 생성하지 않아도 static이 호출된다. 하지만, 그런게 없는, 즉 쓰지 않는 클래스의 static은 호출되지 않는다.

![image-20210215115401486](image-20210215115401486.png) 

스태틱 메서드같은게 메소드 영역에?

메서드 영역은 무조건 한개.

힙 영역도 한개

스택은 쪼개져있고, 각 스레드는 별도의 스택 영역을 갖는다.

PC레지스터도 스레드 개수만큼 있어야 한다. 어디까지 실행했는지 알고 있어야 하기 때문이다.



JIT컴파일러가 바이트코드를 Just in time으로 기계어로 변환? 그래서 빠르다?

인터프리터는 느리다. 그래서 JIT컴파일러를 쓴다?



바이트코드는 메서드영역에 있다? 코드 자체가 메서드 영역에 들어있다.

정적변수같은 스태틱변수는 메서드 영역에. 타이밍은 클래스 로더가 링킹과 이니셜라이제이션할때 정적변수가 메서드 영역에 저장된다.



인스턴스변수는 힙에 저장된다. 스택에는 지역변수만 저장된다.



스태틱블록에서 실행되는 시점엔 인스턴스가 없다. 그래서 인스턴스 변수에는 접근할 수 없다.



어려운 내용을 공부할땐 spec문서를 보는게 좋다. 

참조타입은 객체 이넘 등등이 참조타입이다?



함수를 위해서 스택영역이 필요하다. 함수를 호출하면, 지역변수가 스택프레임에 스택처럼 쌓인다. 

int a = 3

foo(a)이면, 3이라고 하는 값을 넘기는 것. c에서는 call by value, 자바에서는 pass by value라고 한다

foo라는 함수를 호출하면서, 스택프레임에 foo함수의 매개변수가 스택에 쌓이는데, 여기에 pass by value로 넘긴 값이 저장된다. 

Object obj = new Object()

foo(obj) 이렇게 넘기면, 레퍼런스값이 넘어간다.

그럼 foo함수의 매개변수에 해당 레퍼런스값이 저장되고, 이 레퍼런스값을 참조해서 같은 메모리공간에 접근할 수 있다.

# 코딩일일결산

#### 내일의 나에게 보내는 전달사항

* 

#### GOOD

* 

#### BAD

* 

